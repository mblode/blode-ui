{
  "$schema": "https://ui.blode.co/schema/registry-item.json",
  "name": "bar-list",
  "author": "fingertip (https://ui.blode.co)",
  "files": [
    {
      "path": "ui/bar-list.tsx",
      "content": "\"use client\";\n\nimport React, { ReactNode } from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\ntype Bar<T> = T & {\n  key?: string;\n  value: number;\n  name: string;\n  icon?: React.JSXElementConstructor<any>;\n  href?: string;\n  target?: string;\n  color?: string;\n};\n\nexport interface BarListProps<\n  T = any,\n> extends React.HTMLAttributes<HTMLDivElement> {\n  data: Bar<T>[];\n  valueFormatter?: (value: number) => string;\n  labelFormatter?: (label: string) => ReactNode;\n  color?: string;\n  showAnimation?: boolean;\n  sortOrder?: \"ascending\" | \"descending\";\n}\n\nfunction BarListInner<T>(\n  props: BarListProps<T>,\n  ref: React.ForwardedRef<HTMLDivElement>,\n) {\n  const {\n    data = [],\n    color = \"hsl(var(--chart-1))\",\n    valueFormatter = defaultValueFormatter,\n    labelFormatter = defaultLabelFormatter,\n    showAnimation = false,\n    sortOrder = \"descending\",\n    className,\n    ...other\n  } = props;\n\n  const sortedData = React.useMemo(() => {\n    if (sortOrder) {\n      return [...data].sort((a, b) => {\n        return sortOrder === \"ascending\"\n          ? a.value - b.value\n          : b.value - a.value;\n      });\n    }\n    return data;\n  }, [data, sortOrder]);\n\n  const widths = React.useMemo(() => {\n    const maxValue = Math.max(...sortedData.map((item) => item.value), 0);\n    return sortedData.map((item) =>\n      item.value === 0 ? 0 : Math.max((item.value / maxValue) * 100, 2),\n    );\n  }, [sortedData]);\n\n  const rowHeight = \"h-8\";\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\"flex justify-between space-x-6\", className)}\n      aria-sort={sortOrder}\n      {...other}\n    >\n      <div className=\"relative w-full\">\n        {sortedData.map((item, index) => {\n          const Icon = item.icon;\n\n          return (\n            <div\n              key={item.key ?? item.name}\n              className=\"group w-full flex items-center py-1\"\n            >\n              <div\n                className={cn(\n                  \"relative flex items-center rounded-sm transition-all\",\n                  rowHeight,\n                  {\n                    \"mb-0\": index === sortedData.length - 1,\n                    \"duration-500\": showAnimation,\n                  },\n                )}\n                style={{\n                  width: `${widths[index]}%`,\n                  transition: showAnimation ? \"all 1s\" : \"\",\n                }}\n              >\n                <div\n                  className=\"inset-0 absolute rounded-sm transition-all opacity-30\"\n                  style={{\n                    background: color,\n                  }}\n                />\n              </div>\n\n              <div className=\"absolute left-2 pr-4 flex max-w-full\">\n                {Icon ? (\n                  <Icon className=\"flex-none h-5 w-5 mr-2 text-muted-foreground\" />\n                ) : null}\n                {item.href ? (\n                  <a\n                    href={item.href}\n                    target={item.target ?? \"_blank\"}\n                    rel=\"noreferrer\"\n                    className=\"whitespace-nowrap hover:underline truncate text-sm text-foreground\"\n                    onClick={(event) => event.stopPropagation()}\n                  >\n                    {labelFormatter(item.name)}\n                  </a>\n                ) : (\n                  <p className=\"whitespace-nowrap truncate text-sm text-foreground\">\n                    {labelFormatter(item.name)}\n                  </p>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <div>\n        {sortedData.map((item, index) => (\n          <div\n            key={item.key ?? item.name}\n            className={cn(\n              \"flex justify-end items-center\",\n              rowHeight,\n              index === 0 ? \"mt-1\" : \"my-2\",\n            )}\n          >\n            <p className=\"whitespace-nowrap leading-none truncate text-sm text-foreground\">\n              {valueFormatter(item.value)}\n            </p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nBarListInner.displayName = \"BarList\";\n\nexport const BarList = React.forwardRef(BarListInner) as <T>(\n  p: BarListProps<T> & { ref?: React.ForwardedRef<HTMLDivElement> },\n) => ReturnType<typeof BarListInner>;\n\nfunction defaultValueFormatter(value: number): string {\n  return value.toLocaleString();\n}\n\nfunction defaultLabelFormatter(label: string): string {\n  return label;\n}\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "type": "registry:ui"
}

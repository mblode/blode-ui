{
  "$schema": "https://ui.blode.co/schema/registry-item.json",
  "name": "date-range-dropdown",
  "author": "fingertip (https://ui.blode.co)",
  "dependencies": ["blode-icons-react", "date-fns"],
  "registryDependencies": ["button", "calendar", "popover", "select"],
  "files": [
    {
      "path": "ui/date-range-dropdown.tsx",
      "content": "\"use client\";\nimport { Calendar1Icon } from \"blode-icons-react\";\nimport { format, startOfYear, subDays, subMonths } from \"date-fns\";\nimport { useState } from \"react\";\nimport { DateRange } from \"react-day-picker\";\n\nimport { Button } from \"./button\";\nimport { cn } from \"@/lib/utils\";\n\nimport { Calendar } from \"./calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"./popover\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"./select\";\n\nexport type DateRangeOption = {\n  id: string;\n  label: string;\n  value?: DateRange;\n};\n\ntype Props = {\n  dateRangeOption?: DateRangeOption;\n  setDateRangeOption: (option: DateRangeOption) => void;\n  options: DateRangeOption[];\n  fromDate?: Date;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const presets: DateRangeOption[] = [\n  {\n    id: \"24_HOURS\",\n    label: \"Last 24 hours\",\n    value: {\n      from: subDays(new Date(), 1),\n      to: new Date(),\n    },\n  },\n  {\n    id: \"7_DAYS\",\n    label: \"Last 7 days\",\n    value: {\n      from: subDays(new Date(), 7),\n      to: new Date(),\n    },\n  },\n  {\n    id: \"30_DAYS\",\n    label: \"Last 30 days\",\n    value: {\n      from: subDays(new Date(), 30),\n      to: new Date(),\n    },\n  },\n  {\n    id: \"3_MONTHS\",\n    label: \"Last 3 months\",\n    value: {\n      from: subMonths(new Date(), 3),\n      to: new Date(),\n    },\n  },\n  {\n    id: \"YEAR_TO_DATE\",\n    label: \"Year to date\",\n    value: {\n      from: startOfYear(new Date()),\n      to: new Date(),\n    },\n  },\n  {\n    id: \"12_MONTHS\",\n    label: \"Last 12 months\",\n    value: {\n      from: subMonths(new Date(), 12),\n      to: new Date(),\n    },\n  },\n  {\n    id: \"ALL_TIME\",\n    label: \"All time\",\n    value: {\n      from: new Date(2022, 0, 1),\n      to: new Date(),\n    },\n  },\n];\n\nexport const DateRangeDropdown = ({\n  dateRangeOption,\n  setDateRangeOption,\n  options,\n  className,\n  fromDate,\n}: Props) => {\n  const [tempDateRangeOption, setTempDateRangeOption] = useState<\n    DateRangeOption | undefined\n  >(dateRangeOption);\n\n  const handlePresetChange = (value: string) => {\n    const preset = options.find((p) => p.id === value);\n    if (!preset?.value?.from || !preset?.value?.to) return;\n\n    const adjustedValue = {\n      from:\n        fromDate && preset.value.from < fromDate ? fromDate : preset.value.from,\n      to: preset.value.to,\n    };\n\n    setTempDateRangeOption({\n      ...preset,\n      value: adjustedValue,\n    });\n  };\n\n  const handleDateRangeChange = (range: DateRange | undefined) => {\n    if (!range) {\n      setTempDateRangeOption({\n        id: \"custom\",\n        label: \"Custom range\",\n        value: undefined,\n      });\n      return;\n    }\n\n    const adjustedRange = {\n      from:\n        fromDate && range.from && range.from < fromDate ? fromDate : range.from,\n      to: range.to,\n    };\n\n    setTempDateRangeOption({\n      id: \"custom\",\n      label: \"Custom range\",\n      value: adjustedRange,\n    });\n  };\n\n  const handleApply = () => {\n    if (!tempDateRangeOption?.value?.from || !tempDateRangeOption?.value?.to) {\n      return;\n    }\n\n    setDateRangeOption(tempDateRangeOption);\n  };\n\n  return (\n    <div className={cn(\"grid gap-2\", className)}>\n      <Popover>\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"input\"\n            className={cn(\n              \"w-full justify-start text-left font-normal\",\n              !tempDateRangeOption?.value && \"text-muted-foreground\",\n            )}\n          >\n            <Calendar1Icon className=\"mr-2 size-4 shrink-0\" />\n            {tempDateRangeOption?.value?.from ? (\n              tempDateRangeOption.value.to ? (\n                <>\n                  {format(tempDateRangeOption.value.from, \"MMM do, yyyy\")} -{\" \"}\n                  {format(tempDateRangeOption.value.to, \"MMM do, yyyy\")}\n                </>\n              ) : (\n                format(tempDateRangeOption.value.from, \"MMM do, yyyy\")\n              )\n            ) : (\n              <span>Pick a date range</span>\n            )}\n          </Button>\n        </PopoverTrigger>\n\n        <PopoverContent className=\"w-auto\" align=\"start\">\n          <Select\n            onValueChange={handlePresetChange}\n            value={tempDateRangeOption?.id}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select preset range\" />\n            </SelectTrigger>\n\n            <SelectContent position=\"popper\">\n              {options.map((option) => (\n                <SelectItem key={option.id} value={option.id}>\n                  {option.label}\n                </SelectItem>\n              ))}\n\n              {tempDateRangeOption?.id === \"custom\" && (\n                <SelectItem value=\"custom\">Custom</SelectItem>\n              )}\n            </SelectContent>\n          </Select>\n\n          <div className=\"mt-4\">\n            <Calendar\n              initialFocus\n              mode=\"range\"\n              defaultMonth={tempDateRangeOption?.value?.from}\n              selected={tempDateRangeOption?.value}\n              onSelect={handleDateRangeChange}\n              numberOfMonths={1}\n              fromDate={fromDate}\n              className=\"p-0\"\n            />\n          </div>\n\n          <div className=\"mt-4 flex justify-end\">\n            <Button\n              onClick={handleApply}\n              disabled={\n                !tempDateRangeOption?.value?.from ||\n                !tempDateRangeOption?.value?.to\n              }\n            >\n              Apply\n            </Button>\n          </div>\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n};\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "type": "registry:ui"
}
